<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">
	<body>
		<div th:fragment="menu">
			<!-- Fixed navbar -->
			<div class="menu" ng-controller="MenuCtrl as menuCtrl">
				<div class="navigation row">
					<nav ng-cloak="" class="ng-cloak">
						<ul class="navigation text-center">
							<li class="col-sm-3">
								<a href="#" ng-click="menuCtrl.navigate('/')">La Librairie</a>
							</li>
						
							<li 
								class="root-category col-sm-2"
								ng-repeat="rootCategory in menuCtrl.categories | orderBy: 'id'"
								ng-mouseover="menuCtrl.mouseEntersCategoryMenu($event, rootCategory)"
								ng-mouseleave="menuCtrl.mouseLeavesCategoryMenu($event)" 
							> 
								<a ng-click="menuCtrl.openCategory(rootCategory)" href="#">{{rootCategory.name}}</a>
							</li>
							
							<li class="col-sm-3">
								<a ng-click="menuCtrl.navigate('/event')" href="#">Ev√®nements</a>
							</li>
						</ul>
					</nav>
				</div>
					
				<div 
					class="category-submenu"
					ng-mouseover="menuCtrl.mouseEntersCategorySubmenu()"
					ng-mouseleave="menuCtrl.category = null" 
					ng-if="menuCtrl.category != null"
				>
					<div class="sub-category" ng-repeat="subCategory in menuCtrl.category.childCategories">
						<h3>
							<a href="#" ng-click="menuCtrl.openCategory(subCategory)">{{subCategory.name}}</a>
						</h3>
							
						<div class="child-category" ng-repeat="childCategory in subCategory.childCategories">
							<a href="#" ng-click="menuCtrl.openCategory(childCategory)">{{childCategory.name}}</a>
						</div>
					</div>
					
					<div class="clearfix"></div>
				</div>
				
				<div class="sub-menu row">
					<div class="col-sm-10 sub-menu-cell">&nbsp;</div>
					<div class="col-sm-2 sub-menu-cell text-center">
						<div class="sub-menu-spacer pull-left">&nbsp;</div>
							<a href="http://www.lalibrairiefantastique.com" target='_blank'>BLOG &gt;&gt;</a>
					</div>
				</div>
				
				<div ng-controller="MenuSearchCtrl as menuSearchCtrl" class="search-bar row">
					<div class="col-sm-2 you-search text-right">Vous cherchez ?</div>
					<div class="col-sm-5"><input ng-keyup="menuSearchCtrl.searchKeyUp($event)" ng-model="menuSearchCtrl.searchParams.query" class="form-control" type="text" /></div>
					<div class="col-sm-2"><button ng-click="menuSearchCtrl.search()" class="btn btn-default">Recherche</button></div>
					<div class="col-sm-3">&nbsp;</div>
				</div>
			</div>
		</div>
	</body>
</html>
