<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-spring4-4.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org">

<body>
	<div th:fragment="search" th:remove="tag">
		<div class="kubikReferenceSearch autoModal modal fade">
			<div class="modal-dialog" ng-controller="ProductSearchController as view">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
						<h4 class="modal-title">Recherche de produit</h4>
					</div>
					
					<div class="modal-body">
						<div class="form-inline">
							<div class="form-group">
								<label class="sr-only" for="query">Recherche</label>
								<input 
									id="search-product-query" 
									ng-model="query"
									ng-change="keyPressed()"
									class="form-control" 
									type="text" 
									placeholder="Recherche"
								/>
							</div>
							<div ng-click="search()" class="checkbox">
								<label><input ng-model="title" type="checkbox" /> Titre</label>
							</div>
							<div ng-click="search()" class="checkbox">
								<label><input ng-model="author" type="checkbox" /> Auteur</label>
							</div>
							<div ng-click="search()" class="checkbox">
								<label><input ng-model="publisher" type="checkbox" /> Éditeur</label>
							</div>
						</div>
						
						<ul class="pager row text-center">
							<li class="col-md-2">
								&nbsp;
								<a href="#" ng-if="!searchResult.first" ng-click="changePage(searchResult.number-1)">Précédente</a>
							</li>
							
							<li class="col-md-8">Page {{searchResult.number+1}} sur {{searchResult.totalPages}}</li>
							
							<li class="col-md-2">
								&nbsp;
								<a href="#" ng-if="!searchResult.last" ng-click="changePage(searchResult.number+1)">Suivante</a>
							</li>
						</ul>
					
						<table class="table table-condensed text-center">
							<thead>
								<tr>
									<th>
										<span>EAN 13</span>
									</th>
									<th>
										<a data-sortBy="title">Titre</a>
										<span class="ascending hide glyphicon glyphicon-chevron-up"></span>
										<span class="descending hide glyphicon glyphicon-chevron-down"></span>
									</th>
									<th>
										<a data-sortBy="author">Auteur</a>
										<span class="ascending hide glyphicon glyphicon-chevron-up"></span>
										<span class="descending hide glyphicon glyphicon-chevron-down"></span>
									</th>
									<th>
										<a data-sortBy="publisherName">Éditeur</a>
										<span class="ascending hide glyphicon glyphicon-chevron-up"></span>
										<span class="descending hide glyphicon glyphicon-chevron-down"></span>
									</th>
									<th>
										<a data-sortBy="publicationDate">Date de pub.</a>
										<span class="ascending hide glyphicon glyphicon-chevron-up"></span>
										<span class="descending hide glyphicon glyphicon-chevron-down"></span>
									</th>
									<th>
										<a>Couverture</a>
									</th>
									<th>
										&nbsp;
									</th>
								</tr>
							</thead>
							
							<tbody>
								<tr ng-repeat="reference in searchResult.content">
									<td>{{reference.ean13}}</td>
									<td>{{reference.standardLabel}}</td>
									<td>{{reference.author}}</td>
									<td>{{reference.publisher}}</td>
									<td>{{reference.datePublished | date}}</td>
									<td><img id="reference-image-{{reference.id}}" class="reference-image" /></td>
									<td>
										<button
											ng-click="referenceSelected(reference)" 
											type="button" 
											class="btn btn-success btn-xs"
										>
											<span class="glyphicon glyphicon-plus"></span>
										</button>
									</td>
								<tr>
								
								<tr ng-if="page.content.length == 0">
									<td colspan="7">
										Aucun produit retrouvé
									</td>
								</tr>
								
								<tr ng-if="query == null">
									<td colspan="7">
										Rechercher un produit
									</td>
								</tr>
							</tbody>
						</table>
					</div>
					
					<div class="modal-footer">
						<button 
							ng-click="close()"
							type="button" 
							class="btn btn-default" 
							data-dismiss="modal"
						>Fermer</button>
					</div>
				</div><!-- /.modal-content -->
			</div><!-- /.modal-dialog -->
		</div><!-- /.modal -->
	</div>
</body>

</html>